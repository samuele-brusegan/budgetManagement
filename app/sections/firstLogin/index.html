<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js" integrity="sha384-VQqxDN0EQCkWoxt/0vsQvZswzTHUVOImccYmSyhJTp7kGtPed0Qcx8rK9h9YEgx+" crossorigin="anonymous"></script>
    </head>
    <style>
        #group {
            position: fixed;
            bottom: 2.5vh;
            width: 230px;
            height: 60px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        #bybytelab {
            width: 155px;
            height: 16px;
            font-style: normal;
            font-weight: 400;
            font-size: 25px;
            line-height: 16px;
            letter-spacing: 1.7px;
            white-space: nowrap;
            color: #898989;
        }

        #innergroup {
            width: 60px;
            height: 60px;
        }
    </style>
    <body data-bs-theme="dark" style="background-color: var(--primary-bg); overflow: hidden">
        <!--div class="unselectable" style="position: fixed; top: 10px; right: 10px; border-radius: 1rem" id="installButton">Questo sito può essere installato!<br> Clicca qui per installare</div-->
        <div class="col-11 m-auto">
            <div class="d-flex justify-content-center align-items-center flex-column" style="margin-top: 10vh;">
                <img src="../../../assets/favicons/android-chrome-512x512.png" alt="Logo" style="height: 25vh; aspect-ratio: 1/1">
                <div style="text-align: center; margin: 7vh 1rem 0 1rem; line-height: 3rem">
                    <p style="font-size: 30px">
                        <b>
                            Ciao, <br>
                            benvenuti su StockFlow
                        </b>
                    </p>
                </div>
                <div style="background: var(--foreground); width: 90%; color: var(--background);
                    font-size: 2rem; border-radius: 2rem; display: flex; align-items: center; justify-content: center;
                    font-weight: 700; position: fixed; bottom: 20vh;" onclick="navigateTo('privacyPolicy')"
                >
                    Continua
                </div>
                <div id="group">
                    <div id="bybytelab"><sub>by</sub> ByteLab</div>
                    <div id="innergroup"><img src="../../../assets/byteLab.svg" alt="" style="height: 100%; aspect-ratio: 1/1; filter: grayscale(1) contrast(0)"></div>
                </div>
            </div>
        </div>
        <div style="position: fixed; top: 0; right: 0; margin: 10px;" id="pwaAlert"></div>
    </body>
    <script src="../../../navigator.js"></script>
    <script src="../../../header.js"></script>
    <script>
        let deferredEvent;

        window.addEventListener('beforeinstallprompt', (e) => {
            // prevent the browser from displaying the default install dialog
            e.preventDefault();

            // Stash the event so it can be triggered later when the user clicks the button
            deferredEvent = e;
        });
        if (!window.matchMedia('(display-mode: standalone)').matches){
            document.getElementById("pwaAlert").innerHTML = `
            <div class="alert alert-info alert-dismissible fade show" role="alert" id="installButton">
                <b>Questo sito può essere installato!</b><hr> Clicca questa notifica per installare
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>`;
            let installButton = document.getElementById("installButton");
            //se non pwa gen alert!
            installButton.addEventListener('click', () => {
                // if the deferredEvent exists, call its prompt method to display the install dialog
                if(deferredEvent) {
                    deferredEvent.prompt();
                }
            });
        }
    </script>
    <script src="../../../navigator.js"></script>
    <script src="../../../header.js"></script>
<!--    <script src="../../../view/navbar.js"></script>-->
    <script type="module">
        import * as Ctrl from "../../../controllers/Controller.js"
        Ctrl.delData()
    </script>
    <script src="../../../app.js" type="text/javascript"></script>
</html>